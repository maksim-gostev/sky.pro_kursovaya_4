# coursework_4

## _Приложенеие "«Кинопоиск»"_

***

# Стек технологий
- [Python 3.10](https://www.python.org/)
- [marshmallow](https://skyengpublic.notion.site/5-a322e6b0b9df49bf8fbcb822cc2f90fe)
- [SQLAlchemy](https://www.sqlalchemy.org/)
- [Flask](https://flask.palletsprojects.com/en/2.3.x/)
- [Flask-restx](https://flask-restx.readthedocs.io/en/latest/index.html)
- [Pytest](https://docs.pytest.org/en/7.4.x/)
- CRUD
- JWT 


## Функционал
### Аутентификация
*  > Для того чтобы у каждого пользователя была возможность добавлять понравившиеся фильмы 
   > в закладки для просмотра позже, нам нужно их как-то разграничивать, поэтому мы организуем 
   > страницы с регистрацией и аутентификацией на основе уже изученной спецификации JWT.

### Пользователи
* > У каждого пользователя будет страница с его профилем, где он сможет выбрать любимый жанр, 
  > указать имя и фамилию, а также в случае необходимости сменить пароль.
  > Еще для пользователя нужно реализовать механизм добавления и удаления фильмов в/из закладок, 
  > а также просмотр всех сохраненных в закладки фильмов.

### Фильмы, режиссеры, жанры
* > Конечно же, нужно добавить самые главные сущности — фильмы, режиссеры и жанры. 
  > Для них сделаем лишь возможность чтения (get-запросы).
  > Для всех объектов будет работать пагинация, чтобы мы могли постранично выводить
  > их на экран, а также можно будет посмотреть самые новые фильмы.

## Описание
### Авторизация
*  POST /auth/register — передавая email и пароль, создаем пользователя в системе. 
   Пример: 
    > { "email": "2@mail.ru", \
        "password": "1234" }
* POST /auth/login — передаем email и пароль и, если пользователь прошел аутентификацию,
   возвращаем пользователю ответ в виде: 
    > { "access_token": "qwesfsdfa", \
       "refresh_token": "kjhgfgjakda", }
* PUT /auth/login — принимаем пару токенов и, если они валидны, создаем пару новых.

### Фильмов, жанров и режиссеров
* Получение всех фильмов 
    > GET /movies/ 
* Получение одного фильма по id
    > GET /movies/{id}
* Получение всех фильмов с пагинацией
    > GET /movies/?page=2
* Получение всех фильмов с пагинацией и в порядке новизны
    > GET /movies/?status=new&page=1
* Получение всех жанров 
    > GET /genres/
* Получение одного жанра по id 
    > GET /genres/{id}
* Получение всех режисров 
    > GET /directors/
* Получение одного режисёра по id 
    > GET /directors/{id}
 
### Pаботы с пользователем
#### _Для корректной работы эндпоинтов необходима авторизация._
* получить информацию о пользователе (его профиль)
    > GET /user/
* изменить информацию пользователя (имя, фамилия, любимый жанр)
    > PATCH /user/
* обновить пароль пользователя, для этого нужно отправить два пароля
    > PUT /user/password





### Установка
* Скачайте исходники c [GitHub](https://github.com/maksim-gostev/sky.pro_kursovaya_4.git)

* Установка зависимостей

* >pip install -r requirements.txt

* Запуск приложения

* >python app.py
